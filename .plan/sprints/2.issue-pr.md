# Sprint 2 — Issue & PR plan

Issue: Sprint 2 — Backend endpoints (API)

- Title: "Sprint 2 — Backend endpoints (API)"
- Body / Description: Implement the HTTP endpoints described in the API contract using the repository layer from Sprint 1 and Zod-first validation. Add integration tests covering happy paths and key error cases.

Issue summary (manage checklist in PR below):

- Define route handlers and wire to `backend/server.ts`
- Implement `POST /api/contacts` (validation, create, 201)
- Implement `GET /api/contacts` (search + verified filter)
- Implement `PATCH /api/contacts/:id/verify` (mark verified)
- Implement `DELETE /api/contacts/:id` (delete, 204)
- Centralise error envelope and error codes
- Add integration tests (temp DB)
- Document endpoint contract in `.plan/specs/api-contract.md` if changes

---

PR: `sprint/2-api-endpoints`

PR checklist (single source of truth):

- [ ] Branch created from `main`: `sprint/2-api-endpoints`
- [ ] Define route handlers and wire to `backend/server.ts`
- [ ] Implement `POST /api/contacts` (validation, create, 201) using repo
- [ ] Implement `GET /api/contacts` (search + verified filter) using repo
- [ ] Implement `PATCH /api/contacts/:id/verify` (mark verified) using repo
- [ ] Implement `DELETE /api/contacts/:id` (delete, 204) using repo
- [ ] Centralise error envelope and error codes
- [ ] Add integration tests (temp DB) and ensure they pass locally (`deno test`)
- [ ] Update README/docs with endpoint examples if needed
- [ ] Link the issue in the PR description and request reviewer

Notes:

- Keep endpoints focused; if validation/edge cases need more work, create follow-ups.
